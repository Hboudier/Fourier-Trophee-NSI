<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<link rel="stylesheet" href="stylesheetHeader.css">
<link rel="stylesheet" href="stylesheetBody.css">
<link rel="stylesheet" href="stylesheetFooter.css">
<link href="https://fonts.googleapis.com/css?family=Work+Sans:400">
<title>Projet NSI</title>
</head>

<body>
    
<header>
    <div class="header">

        <a href="index.html" class="home">Illustration du Theoreme des series de Fourrier</a>
        <h1 class="logo"></h1>

        <nav>
            <ul>
                <li><a href="index.html">Notre Projet</a></li>
                <li><a href="series_fourrier.html">Series de Fourrier</a></li>
                <li><a href="explication_code.html">Explication du code</a></li>
            </ul>
        </nav>

    </div>
</header>

<div class="body">

<h2>Explication de notre code</h2>

<p>On commence par definir des variables utiles pour la suite:</p>
        <pre><code>let x = [];
    let fourierX;
            
    let time = 0;
    let path = [];
    let slider;</code></pre>
    <br>


    <p>Puis on va créer une fonction nomée "setup" pour creer notre surface sur laquelle on va dessiner le dessin:</p>
    <pre><code>function setup() {
    createCanvas(800, 600);</code></pre>

    <p>On fait ensuite en sorte que le programme ne prenne en compte qu'une coordonnée sur 10:</p>

    <pre><code>    const skip = 10;</code></pre>

    <p>Ensuite, on effectue la transformation de Fourrier sur les coordonnées du fichier "codingtrain.js":</p>

    <pre><code>    for (let i = 0; i < drawing.length; i += skip){
        const c = new Complex(drawing[i].x, drawing[i].y);
        x.push(c);}</code></pre>

    <p>Puis, on va trier la transformation de Fourrier obetenue:</p>

    <pre><code>    fourierX = dft(x);
    fourierX.sort((a,b) => b.amp - a.amp);</code></pre>

    <p>Et enfin, on vient creer et positioner la barre glissante:</p>
    <pre><code>    slider.style('width', '40%')
    slider.style('position', 'absolute');
    slider.style('left', '70.5%');
    slider.style('top', '73%');
    slider.style('transform', 'translateX(-50%)');</code></pre>

    <br><br>


<p>Ensuite, on crée une fonction "epicycles" qui a pour but de créer épicycles à partir des valeurs données par la transformation de fourier:</p>
        <pre><code>function epicycles(x, y, rotation, fourier) {
    console.log(fourier.length);
    for (let i = 0; i< slider.value() && i < fourier.length; i++) {
        let prevx = x;
        let prevy = y;
        let freq = fourier[i].freq;
        let radius = fourier[i].amp;
        let phase = fourier[i].phase
        x += radius * cos(freq * time + phase + rotation);
        y += radius * sin(freq * time + phase + rotation);
    
        stroke(255, 100);
        noFill();
        ellipse(prevx, prevy, radius * 2);
        stroke(255);
        line(prevx,prevy,x,y);
    } 
    return createVector(x, y);
    
    }</code></pre>
    <br><br>


<p>Il faut finalement creer une fonction "draw" pour dessiner le résultat final, à l'aide de la bibliothèque p5:</p>
    <pre><code>function draw() {
    background(0);</code></pre>

    <p>On va utiliser la fonction "epicycles" cree avant pour creer les epicycles necessaires:</p>

    <pre><code>    let v = epicycles(width / 2, height / 2, 0, fourierX);
    path.unshift(v);</code></pre>

    <p>On va ensuite dessiner le dessin en soi:</p>

    <pre><code>    beginShape();
    noFill();
    for(let i = 0; i < path.length; i++){
        vertex(path[i].x, path[i].y);
    }
    endShape();</code></pre>

    <p>Faire avancer le "temps":</p>

    <pre><code>    const dt = TWO_PI / fourierX.length;
    time += dt;</code></pre>

    <p>Et finalement supprimer la ligne lorsque le dessin est realise en entier:</p>

    <pre><code>    if (path.length > fourierX.length * 0.95) {
    path.pop();}
}</code></pre>




</div>

</body>
</html>